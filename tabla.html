<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>

	<div class="container my-5 text-center">
	    <button class="btn btn-danger w-100" onclick="traer()">Obtener</button>
	    <div class="mt-5" >
	    	<p class="p1" id="name1">Codigo: 	</p>
	    	<p class="p1" id="name2">Nombre: 	</p>
	    	<p class="p1" id="name3">Email: 	</p>
	    	<p class="p1" id="name4">Promedio:  </p>
			<table class="table">
			  <thead>
			    <tr>
			      <th scope="col">Asignatura</th>
			      <th scope="col">Cre</th>
			      <th scope="col">P1</th>
			      <th scope="col">P2</th>
			      <th scope="col">P3</th>
			      <th scope="col">EF</th>
			      <th scope="col">DEF</th>
			    </tr>
			  </thead>
			  <tbody id="contenido">
                    
                </tbody>
			</table>
	    </div>
	</div> 

	<script>

		if(localStorage.getItem("codigo")==null) {
			  window.location.href="../index.html";
			}


			var data1 = localStorage.getItem('codigo');
			document.getElementById('name1').innerHTML += data1;

			var data2 = localStorage.getItem('nombre');
			document.getElementById('name2').innerHTML += data2;

			var data3 = localStorage.getItem('email');
			document.getElementById('name3').innerHTML += data3;

			// document.getElementById("cerrar").onclick = function() {
			//   localStorage.removeItem('name');
			//   localStorage.removeItem('user');

			//   window.location.href="../index.html";
			// }

		var contenido = document.querySelector('#contenido')
		
		function traer(){
		    fetch('https://api-parcial.crangarita.repl.co/students/1151987/notas')
		        .then ( res => res.json())
		        .then ( datos => {
		           	console.log(datos)
		            tabla(datos)
		      } )
		}

		function tabla(datos) {
            // console.log(datos)
            contenido.innerHTML = ''
            for(let valor of datos){
                // console.log(valor.nombre)
                contenido.innerHTML += `
                
                <tr>
                    <th scope="row">${ valor.id }</th>
                    <td>${ valor.nombre }</td>
                    <td>${ valor.email }</td>
                    <td>${ valor.estado ? "Activo" : "Eliminado" }</td>
                </tr>
                
                `
            }
        }

	</script>
	
</body>
</html>